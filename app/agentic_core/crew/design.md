# 设计文档
## 概述

基于 CrewAI 进行 Agentic 的设计，从下至上为 Tools(工具) -> Agent(智能体) -> Task(任务)

## 需求分析
需求一：面试题生成
- 人类如何解决这个问题：
    - 首先看看我作为求职者的背景：工作经验，工作年限，求职目标
    - 然后去搜集各种资料：
        - 首先是关于某个技术领域(如操作系统)，需要对哪些大块的知识进行复习，给出一个大纲；
        - 然后再去搜索具体的面试题，无论是从面试经验贴，或者网上发布的题库；
    - 接下来，按照大纲和题库，对题目进行整理；
    - 最后，生成一份题库文档，以大纲进行分类；


## 核心组件定义: Tools

作用: 
- 工具是智能体可以用来与外部世界交互或执行特定功能的函数。例如，搜索网络、读写文件、调用 API 等。
设计原则:
- 功能单一: 每个工具只做一件事，并把它做好；
- 描述清晰: 函数的文档字符串（docstring）应该清晰地描述工具的功能,CrewAI 会利用这个描述来判断何时使用该工具；
- 接口明确: 明确的参数和返回值，用于结构化调用和输出；

### 1. 向量数据库查询工具

思路：
- 思路 1 (preferred)：通用 RAG 工具，通过参数来区分具体的 collection，metadata 等信息
- --思路 2：每个 collection 不同的 tool--

参数：
- collection+description: 不同的库
- top_k：选择多少个向量
- query: 向量查询内容

结构化返回:
- source: 来源文件
- text:   文本chunk
- score:  相关性


## 核心组件定义: Agent 角色

作用: 
- 执行任务的自治实体，有独特的角色描述、目标和背景故事，这些设定会指导其行动和决策。
- Tool 是绑定在 agent 上面的，每个 agent 有一系列工具可以用。

设计原则:
- 角色明确: role 应清晰定义其身份;
- 目标导向: goal 应具体说明其需要达成的最终目的;
- 背景故事: backstory 为智能体提供上下文和个性，影响其沟通风格和行为模式;
    ```
    role="Tech Content Strategist", 
    goal="Craft compelling content on tech advancements",
    backstory="""You are a renowned Content Strategist, known for your insightful and engaging articles. You transform complex concepts into compelling narratives.""",
    tools=["write_tool"]
    ```

### Agent 1：求职者背景分析师

- role="求职者背景分析师"
- goal="你需要对求职者做全方位的了解和分析，比如他的过往工作年限，项目经验，技术栈与工作能力，求职目标，职业亮点，潜在优势，潜在风险，工资水平等等。然后输出一段简洁有力且丰富全面的分析结果。"
- backstory="你是一位经验丰富的职业咨询师，尤其是对于互联网技术方面，你能够精准地对你的用户进行分析。同时你还拥有丰富的向量检索和 LlamaIndex RAG 经验，你擅长通过有效检索向量知识库中的求职者简历、过往项目记录、学习记录等文档，准确提取与用户查询相关的信息，并返回简洁清晰的内容。你习惯分析前全面获取数据，并且依据事实数据来进行分析，而不是凭空生成或胡编乱造。"
- tools=[VectorSearchTool]

### Agent 2: 面试题生成专家

- role="面试题库生成专家"
- goal="根据求职者的背景分析，生成符合求职者的且丰富全面的知识题库。"
- backstory="你是一位经验丰富的面试官，你能够对不同领域的面试题有非常深入地了解，你还拥有丰富的向量检索和 LlamaIndex RAG 经验，你擅长通过有效地检索向量知识库中的求职者的简历以及过往项目记录和工作经验，对求职者进行深刻地了解。你不仅能够生成某个领域全面的面试题库，还能够针对性地求职者的简历或者项目经历，深入浅出地生成出一些探测面试者能力的有水平的题目。"
- tools=[VectorSearchTool]

### Agent 3: 行业专家

- role="行业知识专家"
- goal=""你负责梳理并掌握求职者所在行业及其相关技术领域的核心知识体系、提炼关键概念、常见面试考点与知识图谱结构，为题库构建、学习路径规划、面试准备等任务提供高质量的行业背景支持。""
- backstory="  "你是一位资深的行业知识专家，长期研究技术岗位的能力模型与知识图谱，熟悉各类技术领域的核心概念、考点分布与行业演进趋势，你能够根据求职者的背景，分析其所处行业需要掌握的关键知识点，并为出题、学习规划和面试准备等任务提供内容支撑。"
- tools=[]  # TODO


### Agent: (TODO)面试题资料收集专家


## 核心组件定义: Task 任务

作用: 
- 任务是分配给智能体的具体工作指令
- 对于每个任务来说，Crew 会内部进行动态编排，进行多轮地 LLM 调用，最终实现某个目标。

设计原则:
- 描述精确: description 应详细、无歧义地说明需要完成的工作内容、步骤和预期成果。
- 指定代理: 每个任务都必须明确指定由哪个 agent 来执行。
- 预期产出: expected_output 清晰地定义了任务完成时应该交付什么格式或内容的结果。

### Task 1: 求职者背景分析
- description="请你对求职者的背景信息进行深入分析，生成一份结构化总结。该分析将被用于后续生成针对性的技术题库，且关注的技术领域是{Domain}，因此请重点提取该求职者的技术栈、项目经历、能力优势与知识盲区等信息。"
- expected_output="""一段简洁有力且丰富全面的分析结果，以文本形式输出:
工作年限:
项目经验:
技术栈:
能力优势:
知识盲区:
...
"""
- agent_role="求职者背景分析师"

### Task 2: 生成技术领域知识大纲
- description="请你根据求职者的背景、项目经历和求职目标等特点，为其在 {Domain} 这个技术领域生成一份完整且结构清晰的知识大纲，用于该求职者的面试准备，不用生成具体题目，大纲简洁全面且完整包含求职者需要掌握的内容。该大纲应涵盖该领域从基础到进阶的重要知识点和面试考点。该大纲将用于指导出题 Agent、学习路径规划 Agent 等下游任务，因此请注意层次分明、逻辑清晰、语言准确。"
- expected_output="""
Markdown 格式的技术知识大纲文档，包含以下结构：
1. 核心知识体系概览(列表)
2. 各模块知识点展开(列表)
  - 2.1 子领域A
    - 知识点1
    - 知识点2
  - 2.2 子领域B
    - 知识点
3. 行业发展趋势与新技术动态(可选)
"""
- agent_role="行业专家"

### Task 3: 生成特定领域的面试题库
- description="""根据之前的任务提供 求职者的背景信息 以及技术领域的知识大纲（来自 Task2），为 {domain} 这个技术领域生成一个尽可能全面的面试题库。
要求：
- 题目需基于知识大纲中的知识点生成；知识大纲若有遗漏，应适当补充该领域常见知识点；
- 每个知识点题目确保覆盖全面，且面试中可能会遇到；
- 题目仅包括题干，无需答案或其他字段；输出为结构化 JSON 对象，仅包含一个字段 questions，其值为题目字符串列表；
"""
- expected_output="""{
  "questions": [
    "问题1",
    "问题2",
    ...
  ]
}"""
- agent_role="面试题库生成专家"


## 核心组件定义: Crew

作用: 
- Crew 是管理一系列 task 的一个流程的概念 (我感觉叫团队好像不太合理)，它负责编排任务的执行流程；
- Crew 可以配置一系列 task，然后可以通过 context 指定某个任务作为另一个任务的输入，从而实现任务的编排；
- 当然一个任务也可以运行，这个跟之前想的有点像，也是传统的 Agentic 的一种方式。但是 Crew 提供的 多任务 + 多Agent 的效果可能更好。

### Crew 1: 生成某技术领域面试题库